import { Configuration, Context, ErrorContext, HttpContext, ResourceKind } from '@datadog/browser-core';
import { LifeCycle } from './lifeCycle';
import { ParentContexts } from './parentContexts';
import { RumPerformanceResourceTiming } from './performanceCollection';
import { InternalContext, RumUserConfiguration } from './rum.entry';
import { RumSession } from './rumSession';
import { CustomUserAction, UserActionMeasures, UserActionType } from './userActionCollection';
import { ViewLoadingType, ViewMeasures } from './viewCollection';
export declare enum RumEventCategory {
    USER_ACTION = "user_action",
    ERROR = "error",
    LONG_TASK = "long_task",
    VIEW = "view",
    RESOURCE = "resource"
}
interface PerformanceResourceDetailsElement {
    duration: number;
    start: number;
}
export interface PerformanceResourceDetails {
    redirect?: PerformanceResourceDetailsElement;
    dns?: PerformanceResourceDetailsElement;
    connect?: PerformanceResourceDetailsElement;
    ssl?: PerformanceResourceDetailsElement;
    firstByte: PerformanceResourceDetailsElement;
    download: PerformanceResourceDetailsElement;
}
export interface RumResourceEvent {
    date: number;
    duration: number;
    evt: {
        category: RumEventCategory.RESOURCE;
    };
    http: {
        performance?: PerformanceResourceDetails;
        method?: string;
        statusCode?: number;
        url: string;
    };
    network: {
        bytesWritten?: number;
    };
    resource: {
        kind: ResourceKind;
        id?: string;
    };
    _dd?: {
        traceId: string;
        spanId?: string;
    };
}
export interface RumErrorEvent {
    date: number;
    http?: HttpContext;
    error: ErrorContext;
    evt: {
        category: RumEventCategory.ERROR;
    };
    message: string;
}
export interface RumViewEvent {
    date: number;
    duration: number;
    evt: {
        category: RumEventCategory.VIEW;
    };
    rum: {
        documentVersion: number;
    };
    view: {
        loadingTime?: number;
        loadingType: ViewLoadingType;
        measures: ViewMeasures;
    };
}
export interface RumLongTaskEvent {
    date: number;
    duration: number;
    evt: {
        category: RumEventCategory.LONG_TASK;
    };
}
export interface RumUserActionEvent {
    date?: number;
    duration?: number;
    evt: {
        category: RumEventCategory.USER_ACTION;
        name: string;
    };
    userAction: {
        id?: string;
        type: UserActionType;
        measures?: UserActionMeasures;
    };
}
export declare type RawRumEvent = RumErrorEvent | RumResourceEvent | RumViewEvent | RumLongTaskEvent | RumUserActionEvent;
export declare function startRum(userConfiguration: RumUserConfiguration, getGlobalContext: () => Context): {
    getInternalContext(startTime?: number | undefined): InternalContext | undefined;
    addUserAction(action: CustomUserAction, context?: Context | undefined): void;
};
export declare function doGetInternalContext(parentContexts: ParentContexts, applicationId: string, session: RumSession, startTime?: number): InternalContext | undefined;
export declare function startRumEventCollection(applicationId: string, location: Location, lifeCycle: LifeCycle, configuration: Configuration, session: RumSession, getGlobalContext: () => Context): {
    parentContexts: ParentContexts;
    stop(): void;
};
export declare function trackRumEvents(lifeCycle: LifeCycle, session: RumSession): void;
export declare function trackView(lifeCycle: LifeCycle, handler: (startTime: number, event: RumViewEvent) => void): void;
export declare function handleResourceEntry(lifeCycle: LifeCycle, session: RumSession, handler: (startTime: number, event: RumResourceEvent) => void, entry: RumPerformanceResourceTiming): void;
export {};
